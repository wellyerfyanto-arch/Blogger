services:
  - type: web
    name: crypto-auto-poster
    env: python
    plan: free
    region: singapore
    buildCommand: chmod +x build.sh && ./build.sh
    startCommand: gunicorn app:app --bind 0.0.0.0:$PORT --timeout 120
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.4
      - key: SECRET_KEY
        generateValue: true
      - key: OPENAI_API_KEY
        sync: false
      - key: HF_API_KEY
        sync: false
      - key: BLOGGER_BLOG_ID
        sync: false
      - key: GOOGLE_CLIENT_ID
        sync: false
      - key: GOOGLE_CLIENT_SECRET
        sync: false
      - key: GOOGLE_CREDENTIALS_JSON
        sync: false
    healthCheckPath: /
    autoDeploy: true
    disk:
      name: data
      mountPath: /opt/render/project/src/data
      sizeGB: 1

  # Optional: Background worker for scheduler (jika perlu dedicated worker)
  # - type: worker
  #   name: crypto-poster-scheduler
  #   env: python
  #   plan: free
  #   region: singapore
  #   buildCommand: chmod +x build.sh && ./build.sh
  #   startCommand: python scheduler_worker.py
  #   envVars:
  #     - key: PYTHON_VERSION
  #       value: 3.11.4
  #     - fromService:
  #         type: web
  #         name: crypto-auto-poster
  #         envVarKey: SECRET_KEY
